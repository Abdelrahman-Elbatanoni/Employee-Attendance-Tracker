@model IEnumerable<AttendanceRecord>
@{
    ViewData["Title"] = "Attendance Management";
}

<h2>Attendance Management</h2>

<div class="row mb-4">
    <div class="col-md-3">
        <label>Department</label>
        <select id="filterDepartment" class="form-control" asp-items="ViewBag.Departments">
            <option value="">All</option>
        </select>
    </div>
    <div class="col-md-3">
        <label>Employee</label>
        <select id="filterEmployee" class="form-control" asp-items="ViewBag.Employees">
            <option value="">All</option>
        </select>
    </div>
    <div class="col-md-3">
        <label>From</label>
        <input type="date" id="filterFrom" class="form-control" />
    </div>
    <div class="col-md-3">
        <label>To</label>
        <input type="date" id="filterTo" class="form-control" />
    </div>
</div>

<button class="btn btn-primary mb-3" onclick="filterAttendance()">Filter</button>

<div id="attendanceTable">
    @Html.Partial("AttendanceTable", Model)
</div>

<hr />

<h4>Mark Attendance</h4>
<div class="row">
    <div class="col-md-4">
        <label>Employee</label>
        <select id="markEmployee" class="form-control" asp-items="ViewBag.Employees">
            <option value="">-- Select Employee --</option>
        </select>
    </div>
    <div class="col-md-4">
        <label>Date</label>
        <input type="date" id="markDate" class="form-control" max="@DateTime.Today.ToString("yyyy-MM-dd")" />
    </div>
    <div class="col-md-4">
        <label>Status</label>
        <select id="markStatus" class="form-control">
            <option value="Present">Present</option>
            <option value="Absent">Absent</option>
        </select>
    </div>
</div>

<button class="btn btn-success mt-3" onclick="submitAttendance()">Submit</button>
<div class="mt-2" id="currentStatus"></div>

@section Scripts {
    <script src="~/js/attendance.js"></script>
}
